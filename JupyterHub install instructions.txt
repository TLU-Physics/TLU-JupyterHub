# Server IP 40.119.56.12
# Ubuntu 20.04.6 LTS

# TODO: add command to change the server time zone to Central
apt update
apt upgrade
# what should user directory permissions be?
adduser rspence@tlu.edu --force-badname
adduser cberggren@tlu.edu --force-badname

wget "https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-$(uname)-$(uname -m).sh"
bash Mambaforge-$(uname)-$(uname -m).sh -b -p /opt/mambaforge # has mamba 1.4.2, conda 23.3.1, python 3.10
export PATH=/opt/mambaforge/bin:/opt/mambaforge/condabin:$PATH
mamba init
mamba update mamba # got 1.5.0
mamba install anaconda -c anaconda # appears to be 2022.10 versions; mamba now 1.4.9
mamba install altair vega_datasets vega jupyterhub nbgrader # jupyterhub 4.0.2; nbgrader 0.8.2
cd /opt/mambaforge/etc/jupyter
cp /home/cberggren\@tlu.edu/jupyterhub_config-2023-09-v2.py ./jupyterhub_config.py
jupyterhub token cberggren@tlu.edu # and copy into config file
jupyterhub token tsauncy@tlu.edu # and copy into config file
